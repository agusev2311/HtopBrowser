<!doctype html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="style.css" rel="stylesheet" />
    <title>Htop server</title>
</head>

<body>
    Hello, {{person}}. Key = {{key}}
    <table id="data" class="table table-striped">
        <thead>
            <tr>
                <th>PID</th>
                <th>TTY</th>
                <th>TIME</th>
                <th>CMD</th>
            </tr>
        </thead>
        <tbody>
            {% for pr in prs %}
            <tr>
                <td>{{ pr.pid }}</td>
                <td>{{ pr.tty }}</td>
                <td>{{ pr.time }}</td>
                <td>{{ pr.cmd }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <p class="button">Update</p>
    <script>
        // $( "p" ).on( "click", function() {
        //   $.get( "../../table", function( data ) {
        //     $('table').html(data);
        //   });
        // } );

        function updateTable() {
            $.get("../../table", function(data) {
                $('table').html(data);
            });
        }

        $("p.button").on("click", function() {
            updateTable();
        });

        setInterval(updateTable, 2000);
    </script>
</body>